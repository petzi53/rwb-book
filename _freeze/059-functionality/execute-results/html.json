{
  "hash": "6e7506a2fc0a45ea5645477d818f9f46",
  "result": {
    "engine": "knitr",
    "markdown": "# Functionality  {#sec-chap059}\n\n\n\n\n::::: {#obj-chap059}\n:::: {.my-objectives}\n::: {.my-objectives-header}\nObjectives\n:::\n\n::: {.my-objectives-container}\n\n1. **Functionalities** (@sec-059-functionalities): I am presenting in this section the concept and status of realization for my dashboard on Reporters Without Borders (<a class='glossary' title='Reporters Without Borders (RWB), known by its French name Reporters sans frontières and acronym RSF, is an international non-profit and non-governmental organization headquartered in Paris, France, founded in 1985 in Montpellier by journalists Robert Ménard, Rémy Loury, Jacques Molénat, and Émilien Jubineau. It is dedicated to safeguarding the right to freedom of information and defends journalists and media personnel who are imprisoned, persecuted, or at risk for their work. The organization has consultative status at the United Nations, UNESCO, the Council of Europe, and the International Organisation of the Francophonie.'>RWB</a>).\n2. **Realizations** (@sec-059-realizations): In this section I am\ndescribing my plans for the concrete implementation of the different functionalities. When it is finished I will discuss the chosen realization with its advantages and problems (still to solve).\n\n\n::: {.callout-important #imp-059-work-in-progress}\n##### Work in progress (WIP)\n\nThis chapter will be updated whenever I add some functionality to my RWB dashboard. It isn't completed until I have finished by dashboard.\n:::\n:::\n::::\n:::::\n\n## Functionalities {#sec-059-functionalities}\n\nI am thinking on a dashboard with the following functionalities:\n\n### Three display modes\n\nCentral for the user interface are three display modes:\n\n1. **Map**: Presenting maps, similar as on the [RSF Homepage](https://rsf.org/en/index).\n2. **Chart**: Presenting chars to show the development over the years. There is no equivalent at the RSF website. You can see an example at the <a class='glossary' title='The World Happiness Reports are a partnership of Gallup, the Oxford Wellbeing Research Centre, the UN Sustainable Development Solutions Network, and the WHR’s Editorial Board. The report is produced under the editorial control of the WHR Editorial Board. The Reports reflects a worldwide demand for more attention to happiness and well-being as criteria for government policy. It reviews the state of happiness in the world today and shows how the science of happiness explains personal and national variations in happiness. (https://worldhappiness.report/about/)'>WHR</a> Dashboard under the [subsection \"Charts\"](https://data.worldhappiness.report/chart). \n3. **Country** Presenting details about a specific country. Again the RSF website has no equivalence, but you got an idea after choosing a particular country under the subsection \"Countries\". See as an [example Austria](https://data.worldhappiness.report/country/AUT).\n\n### Parameters\n\nThese three modes are essentially different, because they need diverse additional information (parameters):\n\n#### Map Mode\n\n- `Year`: Allow only one year for map.\n- `Score`: One of the available scores:    \n    - The *global score* for the years 2013-2025.   \n    - The *components scores* for the years 2022-2025.   \n- `Ranking`: Not allowed (or later perhaps a map of the ranking differences between two years?)\n- `Region`: is allowed with map mode, but takes the chosen map and zooms into the selected region. Similar as in [WHR website](https://data.worldhappiness.report/map) by choosing \"Map\" and the select by \"Filter by region\".\n- `Country`: Select one or more of the available countries (because filtered by region was choose, then only the countries of this region are eligible.\n\n#### Chart Mode\n\n- `Year`: Default is all available years, but the user can alternatively (de)select years.\n- `Score`: One of the available scores:    \n    - The *global score* for the years 2013-2025 (default), but (de)selecting years is possible.  \n    - The *components scores* for the years 2022-2025 (default), but (de)selecting years is possible.\n- `Ranking`: Alternatively with `Score` All year is default, but (de)selecting years is possible. \n- `Region`: One region is eligible. Default is all countries.\n- `Country`: One or more countries are eligible. If a region is filtered then one can add other countries or deselect some countries from the region.\n\n#### Country Mode\n\nOverview about different parameters. Which parameters is still to decide. First approximation (see [example Austria](https://data.worldhappiness.report/country/AUT)):\n\nAll three modes are not always available!\n\n- `Score chart`: Global and component scores over all available years\n- `Ranking chart`: Global and component rankings over all available years\n- `Value boxes`: Current, highest, lowest, average, medium, biggest climb, biggest fall (only rankings and global score)\n\n## Realizations {#sec-059-realizations}\n\n### Gloabl Score Line Charts\n\nIn @sec-chap061 I have started with with experiments for the chart mode. At the end of the chapter I was able to display global score line charts for several countries.\n\n::: {.callout-caution #cau-059-colorizing-factors}\n###### Selecting different numbers of countries results in different line colors for each countries\n\nThere is still a problem to overcome: Adding another countries changes the line color of all countries already displayed. This is annoying and distracting.\n\nA work around with `actionButton()` delays the visualization after all countries are selected. But adding or removinmg a country from the selection results in the same inconsisten behaviour.\n\nI have posted my problem on [StackOverflow](https://stackoverflow.com/questions/79757537/how-to-control-line-chart-colors-in-plotly-when-lines-are-added-via-shinyselec) and in the [Posit Forum](https://forum.posit.co/t/how-to-control-line-chart-colors-in-plotly-when-lines-are-added-via-shiny-selectinput/206923) but had not received any help so far (2025-09-07).\n\nAnother issue with the `actionButton()`: It generates an error when it is clicked and no country is selected.\n\n:::\n\n::: {.callout-important #imp-061-color-vector-solution}\n###### A named color vector is the solution for @cau-059-colorizing-factors\n\nI finally found the solution to my problem of changing the line color of the already chosen countries. The part I didn't understand was that I needed a **named** color vector as demonstrated in the [second example of Custom Color Scales](https://plotly.com/r/line-and-scatter/#custom-color-scales) of the Plotly website.\n\nThe problem with the `actionButton()` still exists, but as I prefer the immediate display of the country developments, I do not need the delayed reaction.\n:::\n\n### General Line Charts\n\nMy next step (starting 2025-09-08) is to provide more options for line charts:\n\n- Choosing between global score and ranking.\n\n\n\n\n## Glossary Entries {#unnumbered}\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:left;\"> definition </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> RWB </td>\n   <td style=\"text-align:left;\"> Reporters Without Borders (RWB), known by its French name Reporters sans frontières and acronym RSF, is an international non-profit and non-governmental organization headquartered in Paris, France, founded in 1985 in Montpellier by journalists Robert Ménard, Rémy Loury, Jacques Molénat, and Émilien Jubineau. It is dedicated to safeguarding the right to freedom of information and defends journalists and media personnel who are imprisoned, persecuted, or at risk for their work. The organization has consultative status at the United Nations, UNESCO, the Council of Europe, and the International Organisation of the Francophonie. </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> WHR </td>\n   <td style=\"text-align:left;\"> The World Happiness Reports are a partnership of Gallup, the Oxford Wellbeing Research Centre, the UN Sustainable Development Solutions Network, and the WHR’s Editorial Board. The report is produced under the editorial control of the WHR Editorial Board. The Reports reflects a worldwide demand for more attention to happiness and well-being as criteria for government policy. It reviews the state of happiness in the world today and shows how the science of happiness explains personal and national variations in happiness. (https://worldhappiness.report/about/) </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Session Info {.unnumbered}\n\n::: my-r-code\n::: my-r-code-header\nSession Info\n:::\n\n::: my-r-code-container\n\n::: {.cell}\n\n```{.r .cell-code}\nsessioninfo::session_info()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> ─ Session info ───────────────────────────────────────────────────────────────\n#>  setting  value\n#>  version  R version 4.5.1 (2025-06-13)\n#>  os       macOS Sequoia 15.6.1\n#>  system   aarch64, darwin20\n#>  ui       X11\n#>  language (EN)\n#>  collate  en_US.UTF-8\n#>  ctype    en_US.UTF-8\n#>  tz       Europe/Zagreb\n#>  date     2025-09-08\n#>  pandoc   3.7.0.2 @ /opt/homebrew/bin/ (via rmarkdown)\n#>  quarto   1.8.4 @ /usr/local/bin/quarto\n#> \n#> ─ Packages ───────────────────────────────────────────────────────────────────\n#>  package      * version    date (UTC) lib source\n#>  cli            3.6.5      2025-04-23 [1] CRAN (R 4.5.0)\n#>  commonmark     2.0.0      2025-07-07 [1] CRAN (R 4.5.0)\n#>  curl           7.0.0      2025-08-19 [1] CRAN (R 4.5.0)\n#>  dichromat      2.0-0.1    2022-05-02 [1] CRAN (R 4.5.0)\n#>  digest         0.6.37     2024-08-19 [1] CRAN (R 4.5.0)\n#>  evaluate       1.0.5      2025-08-27 [1] CRAN (R 4.5.1)\n#>  farver         2.1.2      2024-05-13 [1] CRAN (R 4.5.0)\n#>  fastmap        1.2.0      2024-05-15 [1] CRAN (R 4.5.0)\n#>  glossary     * 1.0.0.9003 2025-06-08 [1] local\n#>  glue           1.8.0      2024-09-30 [1] CRAN (R 4.5.0)\n#>  htmltools      0.5.8.1    2024-04-04 [1] CRAN (R 4.5.0)\n#>  htmlwidgets    1.6.4      2023-12-06 [1] CRAN (R 4.5.0)\n#>  jsonlite       2.0.0      2025-03-27 [1] CRAN (R 4.5.0)\n#>  kableExtra     1.4.0      2024-01-24 [1] CRAN (R 4.5.0)\n#>  knitr          1.50       2025-03-16 [1] CRAN (R 4.5.0)\n#>  lifecycle      1.0.4      2023-11-07 [1] CRAN (R 4.5.0)\n#>  litedown       0.7        2025-04-08 [1] CRAN (R 4.5.0)\n#>  magrittr       2.0.3      2022-03-30 [1] CRAN (R 4.5.0)\n#>  markdown       2.0        2025-03-23 [1] CRAN (R 4.5.0)\n#>  R6             2.6.1      2025-02-15 [1] CRAN (R 4.5.0)\n#>  RColorBrewer   1.1-3      2022-04-03 [1] CRAN (R 4.5.0)\n#>  rlang          1.1.6      2025-04-11 [1] CRAN (R 4.5.0)\n#>  rmarkdown      2.29       2024-11-04 [1] CRAN (R 4.5.0)\n#>  rstudioapi     0.17.1     2024-10-22 [1] CRAN (R 4.5.0)\n#>  rversions      2.1.2      2022-08-31 [1] CRAN (R 4.5.0)\n#>  scales         1.4.0      2025-04-24 [1] CRAN (R 4.5.0)\n#>  sessioninfo    1.2.3      2025-02-05 [1] CRAN (R 4.5.0)\n#>  stringi        1.8.7      2025-03-27 [1] CRAN (R 4.5.0)\n#>  stringr        1.5.1      2023-11-14 [1] CRAN (R 4.5.0)\n#>  svglite        2.2.1      2025-05-12 [1] CRAN (R 4.5.0)\n#>  systemfonts    1.2.3      2025-04-30 [1] CRAN (R 4.5.0)\n#>  textshaping    1.0.1      2025-05-01 [1] CRAN (R 4.5.0)\n#>  vctrs          0.6.5      2023-12-01 [1] CRAN (R 4.5.0)\n#>  viridisLite    0.4.2      2023-05-02 [1] CRAN (R 4.5.0)\n#>  xfun           0.53       2025-08-19 [1] CRAN (R 4.5.0)\n#>  xml2           1.4.0      2025-08-20 [1] CRAN (R 4.5.0)\n#>  yaml           2.3.10     2024-07-26 [1] CRAN (R 4.5.0)\n#> \n#>  [1] /Library/Frameworks/R.framework/Versions/4.5-arm64/library\n#>  [2] /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/library\n#>  * ── Packages attached to the search path.\n#> \n#> ──────────────────────────────────────────────────────────────────────────────\n```\n\n\n:::\n:::\n\n:::\n:::\n\n",
    "supporting": [
      "059-functionality_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}