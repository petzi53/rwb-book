{
  "hash": "ddcabee248ae5e75eddb7ba54453cb22",
  "result": {
    "engine": "knitr",
    "markdown": "# Prepare map data {#sec-chap023}\n\n::::: {#obj-chap023}\n:::: {.my-objectives}\n::: {.my-objectives-header}\nObjectives\n:::\n\n::: {.my-objectives-container}\n\nHere I want to prepare the raw country dataset `ne_countries_raw.rds` for joining later with the RWB dataset `rwb_2022_2025.rds` to generate a <a class='glossary' title='A choropleth map is a type of thematic map that uses shading or coloring to represent statistical data across predefined geographic regions. These regions can be political boundaries, such as states or countries, or natural divisions. Each area is colored based on the value of the variable being represented, typically using a gradient where darker shades indicate higher values and lighter shades indicate lower values. This visualization technique helps viewers quickly grasp patterns and trends within the dataset. It is important to note that choropleth maps can sometimes lead to misinterpretation due to the bias introduced by the size of the regions. Larger regions may appear to have more significance simply because of their size, even if their data values are the same as smaller regions. In this case use Cartograms.'>choropleth</a> map.\n\n\n\n:::\n::::\n:::::\n\n`ne_countries_raw.rds` is a long dataset with 169 columns. I need only the last column `geometry` and a column for joining with the RWB dataset. There are many different columns with ISO values. I settle for `adm0_a3`. \n\nAdditionally, I keep also all columns with regional categories. These are the columns numbers 93 to 96:\n\n- continent: Nr. 93,  6 categories\n- region_un: Nr. 94,  5 categories\n- subregion: Nr. 95, 22 categories\n- region_wb: Nr. 96,  7 categories\n\n(All categories counted without Antarctica.)\n\n\n:::::{.my-r-code}\n:::{.my-r-code-header}\n:::::: {#cnj-023-prepare-map-data}\n: Prepare map data\n::::::\n:::\n::::{.my-r-code-container}\n\n<center>**Run this code chunk manually if the file(s) still needs to be downloaded.**</center>\n\n\n::: {.cell}\n\n```{#lst-023-prepare-map-data .r .cell-code  lst-cap=\"Prepare map data to display the World Press Freedom Index\"}\nbase::source(file = \"R/helper.R\")\nlibrary(dplyr, warn.conflicts = FALSE)\n\nne_countries_short <- readRDS(\n    paste0(here::here(), \n           \"/data/chap013/ne_countries_raw.rds\"\n           )\n    ) |> \n    select(adm0_a3, c(93:96), geometry) |>\n    mutate(across(where(is.character), as.factor))\n\n\nmy_save_data_file(\"chap023\", ne_countries_short, \"ne_countries_short.rds\")\n```\n:::\n\n\n***\n\n<center>(*For this R code chunk is no output available*)</center>\n\n::::\n:::::\n\n\n## Glossary Entries {.unnumbered}\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:left;\"> definition </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Choropleth </td>\n   <td style=\"text-align:left;\"> A choropleth map is a type of thematic map that uses shading or coloring to represent statistical data across predefined geographic regions. These regions can be political boundaries, such as states or countries, or natural divisions. Each area is colored based on the value of the variable being represented, typically using a gradient where darker shades indicate higher values and lighter shades indicate lower values. This visualization technique helps viewers quickly grasp patterns and trends within the dataset. It is important to note that choropleth maps can sometimes lead to misinterpretation due to the bias introduced by the size of the regions. Larger regions may appear to have more significance simply because of their size, even if their data values are the same as smaller regions. In this case use Cartograms. </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Session Info {.unnumbered}\n\n::: my-r-code\n::: my-r-code-header\nSession Info\n:::\n\n::: my-r-code-container\n\n::: {.cell}\n\n```{.r .cell-code}\nsessioninfo::session_info()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> ─ Session info ───────────────────────────────────────────────────────────────\n#>  setting  value\n#>  version  R version 4.5.1 (2025-06-13)\n#>  os       macOS Sequoia 15.6\n#>  system   aarch64, darwin20\n#>  ui       X11\n#>  language (EN)\n#>  collate  en_US.UTF-8\n#>  ctype    en_US.UTF-8\n#>  tz       Europe/Vienna\n#>  date     2025-08-14\n#>  pandoc   3.7.0.2 @ /opt/homebrew/bin/ (via rmarkdown)\n#>  quarto   1.8.4 @ /usr/local/bin/quarto\n#> \n#> ─ Packages ───────────────────────────────────────────────────────────────────\n#>  package      * version    date (UTC) lib source\n#>  cli            3.6.5      2025-04-23 [1] CRAN (R 4.5.0)\n#>  commonmark     2.0.0      2025-07-07 [1] CRAN (R 4.5.0)\n#>  curl           6.4.0      2025-06-22 [1] CRAN (R 4.5.0)\n#>  dichromat      2.0-0.1    2022-05-02 [1] CRAN (R 4.5.0)\n#>  digest         0.6.37     2024-08-19 [1] CRAN (R 4.5.0)\n#>  evaluate       1.0.4      2025-06-18 [1] CRAN (R 4.5.0)\n#>  farver         2.1.2      2024-05-13 [1] CRAN (R 4.5.0)\n#>  fastmap        1.2.0      2024-05-15 [1] CRAN (R 4.5.0)\n#>  glossary     * 1.0.0.9003 2025-06-08 [1] local\n#>  glue           1.8.0      2024-09-30 [1] CRAN (R 4.5.0)\n#>  htmltools      0.5.8.1    2024-04-04 [1] CRAN (R 4.5.0)\n#>  htmlwidgets    1.6.4      2023-12-06 [1] CRAN (R 4.5.0)\n#>  jsonlite       2.0.0      2025-03-27 [1] CRAN (R 4.5.0)\n#>  kableExtra     1.4.0      2024-01-24 [1] CRAN (R 4.5.0)\n#>  knitr          1.50       2025-03-16 [1] CRAN (R 4.5.0)\n#>  lifecycle      1.0.4      2023-11-07 [1] CRAN (R 4.5.0)\n#>  litedown       0.7        2025-04-08 [1] CRAN (R 4.5.0)\n#>  magrittr       2.0.3      2022-03-30 [1] CRAN (R 4.5.0)\n#>  markdown       2.0        2025-03-23 [1] CRAN (R 4.5.0)\n#>  R6             2.6.1      2025-02-15 [1] CRAN (R 4.5.0)\n#>  RColorBrewer   1.1-3      2022-04-03 [1] CRAN (R 4.5.0)\n#>  rlang          1.1.6      2025-04-11 [1] CRAN (R 4.5.0)\n#>  rmarkdown      2.29       2024-11-04 [1] CRAN (R 4.5.0)\n#>  rstudioapi     0.17.1     2024-10-22 [1] CRAN (R 4.5.0)\n#>  rversions      2.1.2      2022-08-31 [1] CRAN (R 4.5.0)\n#>  scales         1.4.0      2025-04-24 [1] CRAN (R 4.5.0)\n#>  sessioninfo    1.2.3      2025-02-05 [1] CRAN (R 4.5.0)\n#>  stringi        1.8.7      2025-03-27 [1] CRAN (R 4.5.0)\n#>  stringr        1.5.1      2023-11-14 [1] CRAN (R 4.5.0)\n#>  svglite        2.2.1      2025-05-12 [1] CRAN (R 4.5.0)\n#>  systemfonts    1.2.3      2025-04-30 [1] CRAN (R 4.5.0)\n#>  textshaping    1.0.1      2025-05-01 [1] CRAN (R 4.5.0)\n#>  vctrs          0.6.5      2023-12-01 [1] CRAN (R 4.5.0)\n#>  viridisLite    0.4.2      2023-05-02 [1] CRAN (R 4.5.0)\n#>  xfun           0.52       2025-04-02 [1] CRAN (R 4.5.0)\n#>  xml2           1.3.8      2025-03-14 [1] CRAN (R 4.5.0)\n#>  yaml           2.3.10     2024-07-26 [1] CRAN (R 4.5.0)\n#> \n#>  [1] /Library/Frameworks/R.framework/Versions/4.5-arm64/library\n#>  [2] /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/library\n#>  * ── Packages attached to the search path.\n#> \n#> ──────────────────────────────────────────────────────────────────────────────\n```\n\n\n:::\n:::\n\n:::\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}